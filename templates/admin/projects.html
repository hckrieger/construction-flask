{% extends "admin/admin.html" %}
{% from "_formhelpers.html" import render_field, render_submit %}

{% block content %}
<div class="upload-images">
	<h1>Upload images to projects</h1>

	<!-- Modal -->
	<div id="myModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">

		<!-- Modal content-->
		<div class="modal-content">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">&times;</button>
			<h4 class="modal-title">Add or Remove Project</h4>
		  </div>
		  <div class="modal-body">
			<h2>Add Project</h2>
			<form method="POST" enctype="multipart/form-data" action="{{ url_for('admin_projects') }}">
				{{ add_project.csrf_token }}
				{{ render_submit(add_project.project) }}
				{{ render_submit(add_project.submit) }}
			</form>
			<div class="project-edit">
				{% for display in project_loop %}
					<div class="grouping">
						<h5>{{ display.name }} - </h5><a onclick="check()" href="/dashboard/projects/{{ display.tag }}/delete" class="btn btn-xs btn-danger delete">delete</a>
					</div>
				{% endfor %}
			</div>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		  </div>
		</div>

	  </div>
	</div>

	<div class="row">
		<div class="col-md-4">
			<div class="panel panel-default">
			  <div class="panel-heading">Panel Heading</div>
			  <div class="panel-body">
					<!-- Trigger the modal with a button -->
				<button type="button" style="margin-bottom: .5em;" class="btn btn-success btn-sm" data-toggle="modal" data-target="#myModal">add or remove project</button>
				
				<form method="POST" enctype="multipart/form-data" action="{{ url_for('admin_projects') }}" class="project">
					{{ upload.csrf_token }}
					{{ render_field(upload.file) }}
					<div class="form-group">
						<dt><label>project</label></dt>
						<dd>
							<select name="select_project">
								{% for display in project_loop %}
									<option value="{{ display.tag }}">{{ display.name }}</option>
								{% endfor %}
							</select>
						</dd>
					</div>
					{{ render_submit(upload.submit) }}
				</form>	  
			  </div>
			</div>	
		</div>
		<div class="col-md-8">
			<ul class="list-group">
			 {% for display in project_loop %}
				<a href="{{ url_for('admin_projects') + '#' + display.tag }}"><li class="list-group-item">{{ display.name }}</li></a>
			 {% endfor %}
			</ul>
		</div>
	</div>
	
	<div class="display-images">
		{% for display in project_loop %}
			<h3 id="{{ display.tag }}">{{ display.name }}</h3>
			{% for images in display.images.all() %}
				<img src="{{ s3projects +'/'+ display.name +'/'+ images.name }}">
			{% endfor %}
		{% endfor %}
	</div>

</div>

<script>
$(function() {
	
	$('input[type="submit"]').attr("class", "btn btn-primary btn-xs");
	$('input[type="file"]').addClass("colorOver");
});

function check() {
	confirm("Are you sure you want to delete this folder?  If you delete it, it will also delete the images inside of it.");
} 


</script>
{% endblock %}

